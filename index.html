<div class="product-ideas-widget">
  <style>
    :root {
      --primary-color: #6c5ce7;
      --secondary-color: #a29bfe;
      --bg-color: #f9f9f9;
      --text-color: #2d3436;
      --card-bg: #ffffff;
      --border-radius: 12px;
      --box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
      --tab-active: #6c5ce7;
      --tab-inactive: #dfe6e9;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }

    .product-ideas-widget {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: var(--bg-color);
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
    }

    h1 {
      color: var(--primary-color);
      text-align: center;
      margin-bottom: 20px;
      font-weight: 600;
      font-size: 1.8rem;
    }

    .category-tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 20px;
    }

    .category-tab {
      padding: 10px 15px;
      background-color: var(--tab-inactive);
      border-radius: var(--border-radius);
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .category-tab.active {
      background-color: var(--tab-active);
      color: white;
    }

    .category-content {
      display: none;
    }

    .category-content.active {
      display: block;
      animation: fadeIn 0.5s ease-out;
    }

    .select-container {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-bottom: 25px;
    }

    select {
      padding: 12px 15px;
      border: 2px solid var(--secondary-color);
      border-radius: var(--border-radius);
      background-color: var(--card-bg);
      color: var(--text-color);
      font-size: 1rem;
      outline: none;
      transition: all 0.3s ease;
    }

    select:focus {
      border-color: var(--primary-color);
    }

    button {
      background-color: var(--primary-color);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 1rem;
      font-weight: 500;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    button:hover {
      background-color: #5649d1;
      transform: translateY(-2px);
    }

    button:disabled {
      background-color: #b2b2b2;
      cursor: not-allowed;
      transform: none;
    }

    .spinner {
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .results-container {
      display: none;
      margin-top: 25px;
      animation: fadeIn 0.5s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .result-card {
      background-color: var(--card-bg);
      border-radius: var(--border-radius);
      padding: 20px;
      margin-bottom: 15px;
      box-shadow: var(--box-shadow);
    }

    .result-title {
      color: var(--primary-color);
      font-size: 1.3rem;
      margin-bottom: 10px;
      font-weight: 600;
    }

    .pain-point {
      font-weight: 500;
      margin-bottom: 15px;
      color: var(--text-color);
    }

    .product-idea {
      margin-bottom: 10px;
      padding-left: 20px;
      position: relative;
      color: var(--text-color);
    }

    .product-idea:before {
      content: "â€¢";
      position: absolute;
      left: 0;
      color: var(--primary-color);
      font-weight: bold;
    }

    .action-buttons {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    .action-buttons button {
      flex: 1;
      padding: 10px;
      font-size: 0.9rem;
    }

    .copy-btn {
      background-color: #00b894;
    }

    .copy-btn:hover {
      background-color: #00a884;
    }

    .share-btn {
      background-color: #0984e3;
    }

    .share-btn:hover {
      background-color: #0773c5;
    }

    .error-message {
      color: #d63031;
      text-align: center;
      margin-top: 20px;
      font-weight: 500;
    }

    .share-options {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .share-modal {
      background-color: white;
      padding: 20px;
      border-radius: var(--border-radius);
      max-width: 400px;
      width: 90%;
    }

    .share-platforms {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 15px;
    }

    .share-platform {
      padding: 10px 15px;
      background-color: var(--primary-color);
      color: white;
      border-radius: var(--border-radius);
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .close-share {
      background-color: #d63031;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: var(--border-radius);
      cursor: pointer;
      margin-top: 15px;
    }

    @media (max-width: 600px) {
      .product-ideas-widget {
        padding: 15px;
      }

      h1 {
        font-size: 1.5rem;
      }

      .category-tabs {
        gap: 5px;
      }

      .category-tab {
        padding: 8px 10px;
        font-size: 0.9rem;
      }

      .action-buttons {
        flex-direction: column;
      }
    }
  </style>

  <h1>Get Unique Digital Product Ideas</h1>
  
  <div class="category-tabs">
    <div class="category-tab active" data-category="womens">Women's Needs</div>
    <div class="category-tab" data-category="business">Business</div>
    <div class="category-tab" data-category="money">Money</div>
    <div class="category-tab" data-category="health">Health</div>
    <div class="category-tab" data-category="relationship">Relationship</div>
    <div class="category-tab" data-category="skincare">Skin Care</div>
    <div class="category-tab" data-category="education">Education</div>
    <div class="category-tab" data-category="traveling">Traveling</div>
  </div>

  <!-- Women's Needs Category -->
  <div class="category-content active" id="womens">
    <div class="select-container">
      <select id="womensSelect">
        <option value="" disabled selected>Select a women's need</option>
        <option value="Pregnant women">Pregnant women</option>
        <option value="Women who are about to get married">Women about to get married</option>
        <option value="Single ladies">Single ladies</option>
        <option value="Women looking to get pregnant">Women looking to get pregnant</option>
      </select>
    </div>
  </div>

  <!-- Business Problems Category -->
  <div class="category-content" id="business">
    <div class="select-container">
      <select id="businessSelect">
        <option value="" disabled selected>Select a business problem</option>
        <option value="A man or woman who wants to Start A Business">Start A Business</option>
        <option value="A man or woman who wants to Become Self-Employed">Become Self-Employed</option>
        <option value="A man or woman who needs to Raise Capital">Raise Capital</option>
        <option value="A man or woman who wants to Invest">Invest</option>
        <option value="A man or woman who wants to Determine High-Paying Business">Determine High-Paying Business</option>
        <option value="A man or woman who needs Best Business Strategy and Plan">Best Business Strategy and Plan</option>
        <option value="A man or woman who wants to Grow A business">Grow A business</option>
        <option value="A man or woman who needs to Handle Employees">Handle Employees</option>
        <option value="A man or woman who wants to Brand Their Business">Brand Your Business</option>
        <option value="A man or woman who wants to Promote Products on Social Media">Promote Products on Social Media</option>
      </select>
    </div>
  </div>

  <!-- Money Problems Category -->
  <div class="category-content" id="money">
    <div class="select-container">
      <select id="moneySelect">
        <option value="" disabled selected>Select a money problem</option>
        <option value="A man or woman who wants a High paying Job">Get High paying Job</option>
        <option value="A man or woman who wants to Learn High Paying Skill">Learn High Paying Skill</option>
        <option value="A man or woman who wants to Pass Job Interviews">Pass Job Interviews</option>
        <option value="A man or woman who wants to Work Abroad">Work Abroad</option>
        <option value="A man or woman who wants to Work From Home">Work From Home</option>
        <option value="A man or woman who wants to Make Money Online">Make Money Online</option>
        <option value="A man or woman who wants to Make money on YouTube, Facebook, Instagram">Make money on Social Media</option>
      </select>
    </div>
  </div>

  <!-- Health Problems Category -->
  <div class="category-content" id="health">
    <div class="select-container">
      <select id="healthSelect">
        <option value="" disabled selected>Select a health problem</option>
        <option value="A man or woman with Bad Metabolism And Poor Digestion">Stop Bad Metabolism And Poor Digestion</option>
        <option value="A man or woman looking for Solution To Aging">Solution To Aging</option>
        <option value="A man or woman who wants to Cure Diabetes">Cure Diabetes</option>
        <option value="A woman looking for Natural Remedy For Fibroids">Natural Remedy For Fibroids</option>
        <option value="A man or woman with Poor Vision">Cure Poor Vision</option>
        <option value="A man or woman who is Fatty And Over Weight">Lose Weight</option>
        <option value="A man or woman who wants to Get Six Pack">Get Six Pack</option>
        <option value="A man or woman who wants to Build Muscles">Build Muscles</option>
        <option value="A man or woman looking for Natural remedy for Kidney, Liver And Heartburn diseases">Natural remedy for Organ Diseases</option>
        <option value="A man or woman who wants to Cure High Blood Pressure">Cure High Blood Pressure</option>
      </select>
    </div>
  </div>

  <!-- Relationship Problems Category -->
  <div class="category-content" id="relationship">
    <div class="select-container">
      <select id="relationshipSelect">
        <option value="" disabled selected>Select a relationship problem</option>
        <option value="A man or woman who wants to Get Ex Back">Get Ex Back</option>
        <option value="A man who wants to Get Women">Getting Women</option>
        <option value="A woman who wants to Attract A Man">Attracting A Man</option>
        <option value="A man or woman with Abusive Spouse">Abusive Spouse</option>
        <option value="A man with Small Penis">Small Penis</option>
        <option value="A man or woman with Cheating Spouse">Cheating Spouse</option>
        <option value="A man or woman in Friendship Zone">Friendship Zone</option>
        <option value="A man or woman who wants to Attract Partners Online">Attracting Partners Online</option>
        <option value="A man or woman who wants to Satisfy Women Organism">Satisfying Women Organism</option>
        <option value="A man with Premature Emasculation">Premature Emasculation</option>
      </select>
    </div>
  </div>

  <!-- Skin Care Problems Category -->
  <div class="category-content" id="skincare">
    <div class="select-container">
      <select id="skincareSelect">
        <option value="" disabled selected>Select a skin care problem</option>
        <option value="A man or woman with Eye Bags and Dark Circle">Eye Bags and Dark Circle</option>
        <option value="A woman with Small Or Sagging Breast">Small Or Sagging Breast</option>
        <option value="A man or woman with Wrinkles">Wrinkles</option>
        <option value="A man or woman with Falling Hair Problems">Falling Hair Problems</option>
        <option value="A man or woman who wants Whitening">Whitening</option>
        <option value="A man or woman with Pimples & Acne">Pimples & Acne</option>
        <option value="A man or woman with Dark Knuckles">Dark Knuckles</option>
        <option value="A man or woman with Dandruff">Dandruff</option>
        <option value="A man or woman with Cellulite">Cellulite</option>
        <option value="A man or woman with Stretch Marks">Stretch Marks</option>
        <option value="A man or woman with Sun Burn & Discolouration">Sun Burn & Discolouration</option>
        <option value="A woman with Small Butt & Hips">Small Butt & Hips</option>
      </select>
    </div>
  </div>

  <!-- Educational Problems Category -->
  <div class="category-content" id="education">
    <div class="select-container">
      <select id="educationSelect">
        <option value="" disabled selected>Select an education problem</option>
        <option value="A student who wants to Study Abroad">Study Abroad</option>
        <option value="A student who needs to Pay School Fees">Pay School Fees</option>
        <option value="A student who wants to Pass MBE Exams">Pass MBE Exams</option>
        <option value="A student who wants to Pass International Exams (TOEFL)">Pass International Exams</option>
        <option value="A student who wants to Pass JAMB & WAEC, NECO">Pass Local Exams</option>
        <option value="A student who wants to Get Scholarship">Get Scholarship</option>
        <option value="A student who wants to Improve Brain Retention">Brain Retention</option>
        <option value="A student who wants to Become An Expert In Math">Become Math Expert</option>
        <option value="A student who wants to Pass Finals Exam">Pass Finals Exam</option>
        <option value="A student who wants to Pass Bar Exam">Pass Bar Exam</option>
      </select>
    </div>
  </div>

  <!-- Traveling Problems Category -->
  <div class="category-content" id="traveling">
    <div class="select-container">
      <select id="travelingSelect">
        <option value="" disabled selected>Select a traveling problem</option>
        <option value="A student who wants to Travel Abroad">Travel Abroad as Student</option>
        <option value="A man or woman who wants to Get Working Permit">Get Working Permit</option>
        <option value="A man or woman who wants to Get Permanent Stay">Get Permanent Stay</option>
      </select>
    </div>
  </div>

  <button id="generateBtn">Generate Digital Product Ideas</button>
  
  <div class="results-container" id="resultsContainer">
    <div class="result-card">
      <h2 class="result-title" id="resultTitle"></h2>
      <p class="pain-point" id="painPoint"></p>
      <div id="productIdeas"></div>
      
      <div class="action-buttons">
        <button class="copy-btn" id="copyBtn">Copy Results</button>
        <button class="share-btn" id="shareBtn">Share Results</button>
      </div>
    </div>
  </div>
  
  <p class="error-message" id="errorMessage"></p>

  <div class="share-options" id="shareOptions">
    <div class="share-modal">
      <h3>Share on Social Media</h3>
      <div class="share-platforms">
        <div class="share-platform" data-platform="twitter">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="#1DA1F2">
            <path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"/>
          </svg>
          Twitter
        </div>
        <div class="share-platform" data-platform="facebook">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="#1877F2">
            <path d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z"/>
          </svg>
          Facebook
        </div>
        <div class="share-platform" data-platform="linkedin">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="#0077B5">
            <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
          </svg>
          LinkedIn
        </div>
        <div class="share-platform" data-platform="whatsapp">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="#25D366">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.095 3.2 5.076 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
          </svg>
          WhatsApp
        </div>
      </div>
      <button class="close-share" id="closeShare">Close</button>
    </div>
  </div>
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    // Tab switching functionality
    const tabs = document.querySelectorAll('.category-tab');
    const categoryContents = document.querySelectorAll('.category-content');
    
    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        tabs.forEach(t => t.classList.remove('active'));
        categoryContents.forEach(c => c.classList.remove('active'));
        
        tab.classList.add('active');
        const categoryId = tab.getAttribute('data-category');
        document.getElementById(categoryId).classList.add('active');
      });
    });

    const generateBtn = document.getElementById('generateBtn');
    const resultsContainer = document.getElementById('resultsContainer');
    const resultTitle = document.getElementById('resultTitle');
    const painPoint = document.getElementById('painPoint');
    const productIdeas = document.getElementById('productIdeas');
    const copyBtn = document.getElementById('copyBtn');
    const shareBtn = document.getElementById('shareBtn');
    const errorMessage = document.getElementById('errorMessage');
    const shareOptions = document.getElementById('shareOptions');
    const closeShare = document.getElementById('closeShare');
    const sharePlatforms = document.querySelectorAll('.share-platform');
    
    generateBtn.addEventListener('click', generateProductIdeas);
    copyBtn.addEventListener('click', copyResults);
    shareBtn.addEventListener('click', showShareOptions);
    closeShare.addEventListener('click', hideShareOptions);
    
    sharePlatforms.forEach(platform => {
      platform.addEventListener('click', () => {
        shareToPlatform(platform.getAttribute('data-platform'));
      });
    });
    
    // ðŸ”§ REPLACE THIS WITH YOUR ACTUAL GAS DEPLOYMENT URL
    const BACKEND_URL = 'https://script.google.com/macros/s/AKfycbz1l46op-OgrajiO3t-6KZtWRkbmClFB2oNUAeeUzX0rzyPJoWP4HzyFUEL1bThygvR/exec';
    
    async function generateProductIdeas() {
      // Get the active category
      const activeTab = document.querySelector('.category-tab.active');
      const activeCategory = activeTab ? activeTab.getAttribute('data-category') : null;
      
      if (!activeCategory) {
        showError('Please select a category');
        return;
      }
      
      // Get the selected value from the active category's select
      const selectId = `${activeCategory}Select`;
      const selectElement = document.getElementById(selectId);
      const selectedGroup = selectElement ? selectElement.value : null;
      
      if (!selectedGroup) {
        showError(`Please select an option from the ${activeTab.textContent} category`);
        return;
      }
      
      generateBtn.disabled = true;
      generateBtn.innerHTML = '<div class="spinner"></div> Generating...';
      errorMessage.textContent = '';
      resultsContainer.style.display = 'none';
      
      try {
        console.log('Sending request to backend...');
        
        const response = await fetch(BACKEND_URL, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            endpoint: 'generate-ideas',
            targetGroup: selectedGroup,
            category: activeCategory
          })
        });
  
        console.log('Response status:', response.status);
        const data = await response.json();
        console.log('Response data:', data);
        
        if (data.status === 'success') {
          displayResults(selectedGroup, data.data);
        } else if (data.error) {
          throw new Error(data.error);
        } else {
          throw new Error('Unknown response format');
        }
        
      } catch (error) {
        console.error('Frontend error:', error);
        showError('An error occurred. Please try again. ' + error.message);
      } finally {
        generateBtn.disabled = false;
        generateBtn.textContent = 'Generate Digital Product Ideas';
      }
    }
    
    function displayResults(selectedGroup, responseData) {
      resultTitle.textContent = selectedGroup;
      painPoint.textContent = `Pain point: ${responseData.painPoint}`;
      
      // Process product ideas
      productIdeas.innerHTML = '';
      if (responseData.ideas && responseData.ideas.length > 0) {
        responseData.ideas.forEach((idea, index) => {
          const ideaElement = document.createElement('p');
          ideaElement.className = 'product-idea';
          ideaElement.textContent = `${index + 1}. ${idea}`;
          productIdeas.appendChild(ideaElement);
        });
      } else {
        const noIdeasElement = document.createElement('p');
        noIdeasElement.className = 'product-idea';
        noIdeasElement.textContent = 'No ideas generated. Please try again.';
        productIdeas.appendChild(noIdeasElement);
      }
      
      resultsContainer.style.display = 'block';
    }
    
    function copyResults() {
      const textToCopy = `${resultTitle.textContent}\n${painPoint.textContent}\n\nProduct ideas:\n${Array.from(productIdeas.children).map(el => el.textContent).join('\n')}`;
      
      navigator.clipboard.writeText(textToCopy).then(() => {
        const originalText = copyBtn.textContent;
        copyBtn.textContent = 'Copied!';
        setTimeout(() => {
          copyBtn.textContent = originalText;
        }, 2000);
      }).catch(err => {
        console.error('Failed to copy: ', err);
      });
    }
    
    function showShareOptions() {
      shareOptions.style.display = 'flex';
    }
    
    function hideShareOptions() {
      shareOptions.style.display = 'none';
    }
    
    function shareToPlatform(platform) {
      const shareText = `Check out these digital product ideas for ${resultTitle.textContent}:\n\n${painPoint.textContent}\n\n${Array.from(productIdeas.children).map(el => el.textContent).join('\n')}`;
      const shareUrl = encodeURIComponent(window.location.href);
      const text = encodeURIComponent(shareText);
      
      let url = '';
      switch(platform) {
        case 'twitter':
          url = `https://twitter.com/intent/tweet?text=${text}&url=${shareUrl}`;
          break;
        case 'facebook':
          url = `https://www.facebook.com/sharer/sharer.php?u=${shareUrl}&quote=${text}`;
          break;
        case 'linkedin':
          url = `https://www.linkedin.com/sharing/share-offsite/?url=${shareUrl}`;
          break;
        case 'whatsapp':
          url = `https://wa.me/?text=${text}%20${shareUrl}`;
          break;
      }
      
      if (url) {
        window.open(url, '_blank', 'width=600,height=400');
      }
      hideShareOptions();
    }
    
    function showError(message) {
      errorMessage.textContent = message;
      setTimeout(() => {
        errorMessage.textContent = '';
      }, 5000);
    }
  });
</script>
</div>
